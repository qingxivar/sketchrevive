<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>åŒç”»æ¿ç»˜å›¾å·¥å…·</title>
  <!-- Fabric.js CDN -->
  <script src="https://cdn.jsdelivr.net/npm/fabric@5.3.0/dist/fabric.min.js"></script>
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial,
        "Noto Sans", "PingFang SC", "Microsoft YaHei", sans-serif;
      background: radial-gradient(circle at top left, #3b82f6 0, #020617 50%, #020617 100%);
      color: #e5e7eb;
      min-height: 100vh;
      display: flex;
      align-items: stretch;
      justify-content: center;
    }

    .app {
      width: 100%;
      max-width: 1360px;
      margin: 24px;
      padding: 24px;
      border-radius: 24px;
      background: rgba(15, 23, 42, 0.92);
      box-shadow:
        0 24px 60px rgba(0, 0, 0, 0.6),
        0 0 0 1px rgba(148, 163, 184, 0.1);
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 12px;
      border-bottom: 1px dashed rgba(148, 163, 184, 0.4);
      padding-bottom: 10px;
    }

    header h1 {
      font-size: 22px;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    header h1 span.icon {
      display: inline-flex;
      width: 26px;
      height: 26px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 30%, #f97316, #e11d48);
      align-items: center;
      justify-content: center;
      font-size: 18px;
    }

    header p {
      margin: 0;
      font-size: 13px;
      color: #9ca3af;
    }

    .badge {
      padding: 4px 10px;
      border-radius: 999px;
      font-size: 11px;
      background: rgba(37, 99, 235, 0.12);
      border: 1px solid rgba(59, 130, 246, 0.5);
      color: #bfdbfe;
    }

    .boards {
      display: grid;
      grid-template-columns: minmax(0, 1fr) minmax(0, 1fr);
      gap: 16px;
    }

    @media (max-width: 900px) {
      .boards {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .board {
      border-radius: 20px;
      background: radial-gradient(circle at top, rgba(30, 64, 175, 0.3), rgba(15, 23, 42, 0.96));
      padding: 14px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      border: 1px solid rgba(148, 163, 184, 0.35);
    }

    .board-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
    }

    .board-title {
      font-size: 15px;
      font-weight: 500;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .board-title.dot {
      position: relative;
      padding-left: 14px;
    }

    .board-title.dot::before {
      content: "";
      position: absolute;
      left: 0;
      top: 50%;
      transform: translateY(-50%);
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: #22c55e;
      box-shadow: 0 0 6px rgba(34, 197, 94, 0.9);
    }

    .board-subtitle {
      font-size: 12px;
      color: #9ca3af;
    }

    .toolbar {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      align-items: center;
      padding: 8px;
      border-radius: 14px;
      background: rgba(15, 23, 42, 0.85);
      border: 1px solid rgba(148, 163, 184, 0.35);
    }

    .toolbar-group {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 8px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.9);
    }

    .toolbar-group label {
      font-size: 11px;
      color: #9ca3af;
      white-space: nowrap;
    }

    .toolbar select,
    .toolbar input[type="color"],
    .toolbar input[type="range"],
    .toolbar button {
      font-size: 11px;
    }

    .toolbar select {
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.6);
      background: rgba(15, 23, 42, 0.95);
      color: #e5e7eb;
      padding: 4px 24px 4px 8px;
      appearance: none;
      position: relative;
    }

    .toolbar input[type="color"] {
      width: 32px;
      height: 20px;
      padding: 0;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      background: transparent;
    }

    .toolbar input[type="range"] {
      width: 90px;
      accent-color: #60a5fa;
    }

    .toolbar button {
      border-radius: 999px;
      border: none;
      padding: 6px 12px;
      cursor: pointer;
      background: linear-gradient(90deg, #2563eb, #4f46e5);
      color: #e5e7eb;
      font-weight: 500;
      display: inline-flex;
      align-items: center;
      gap: 4px;
      box-shadow: 0 0 0 1px rgba(15, 23, 42, 0.9);
      transition: transform 0.08s ease, box-shadow 0.08s ease, background 0.08s ease;
      white-space: nowrap;
    }

    .toolbar button.secondary {
      background: rgba(30, 64, 175, 0.5);
    }

    .toolbar button.danger {
      background: linear-gradient(90deg, #f97316, #e11d48);
    }

    .toolbar button:hover {
      transform: translateY(-0.5px);
      box-shadow: 0 6px 14px rgba(15, 23, 42, 0.9);
    }

    .toolbar button span {
      font-size: 13px;
    }

    .canvas-wrapper {
      border-radius: 14px;
      overflow: hidden;
      border: 1px solid rgba(148, 163, 184, 0.35);
      background: radial-gradient(circle at top, #0b1120, #020617);
      box-shadow: inset 0 0 0 1px rgba(15, 23, 42, 0.9);
      position: relative;
    }

    .canvas-wrapper canvas {
      display: block;
      background: transparent;
    }

    .canvas-footer {
      display: flex;
      justify-content: flex-end;
      font-size: 11px;
      color: #6b7280;
      margin-top: 4px;
    }

    .vector-panel {
      margin-top: 6px;
      padding: 8px;
      border-radius: 14px;
      border: 1px solid rgba(148, 163, 184, 0.35);
      background: radial-gradient(circle at top, rgba(30, 64, 175, 0.4), rgba(15, 23, 42, 0.96));
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .vector-panel-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      font-size: 12px;
      color: #e5e7eb;
    }

    .vector-panel-header span.tip {
      font-size: 11px;
      color: #9ca3af;
    }

    .vector-panel textarea {
      width: 100%;
      min-height: 110px;
      resize: vertical;
      border-radius: 12px;
      padding: 8px 10px;
      border: 1px solid rgba(148, 163, 184, 0.4);
      background: rgba(15, 23, 42, 0.95);
      color: #e5e7eb;
      font-size: 11px;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono",
        "Courier New", monospace;
    }

    .vector-panel textarea:focus {
      outline: none;
      border-color: rgba(96, 165, 250, 0.9);
      box-shadow: 0 0 0 1px rgba(59, 130, 246, 0.5);
    }

    .vector-panel-actions {
      display: flex;
      justify-content: flex-end;
      gap: 8px;
      flex-wrap: wrap;
    }

    small.mono {
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono",
        "Courier New", monospace;
    }
  </style>
</head>
<body>
  <div class="app">
    <header>
      <div>
        <h1>
          <span class="icon">âœï¸</span>
          åŒç”»æ¿ç»˜å›¾ &amp; çŸ¢é‡ç¬”ç”»é¢æ¿
        </h1>
        <p>å·¦ä¾§è‡ªç”±ç»˜åˆ¶ï¼Œå³ä¾§å¯è½½å…¥ / é¢„è§ˆçŸ¢é‡åŒ–ç¬”ç”»ï¼ˆFabric.js JSONï¼‰ã€‚</p>
      </div>
      <div class="badge">Fabric.js Â· åŒç”»å¸ƒ Â· çŸ¢é‡ç¬”ç”»</div>
    </header>

    <main class="boards">
      <!-- å·¦ä¾§ç”»æ¿ -->
      <section class="board">
        <div class="board-header">
          <div>
            <div class="board-title dot">å·¦ä¾§ç”»æ¿ Â· æ‰‹ç»˜åŒº</div>
            <div class="board-subtitle">é€‚åˆè‡ªç”±è‰å›¾ã€æ¶‚é¸¦ã€è¯•ç¬”åˆ·ç­‰æ“ä½œ</div>
          </div>
        </div>

        <div class="toolbar" id="left-toolbar">
          <div class="toolbar-group">
            <label for="left-drawing-mode-selector">ç”»ç¬”</label>
            <select id="left-drawing-mode-selector">
              <option value="Pencil">é“…ç¬”</option>
              <option value="Circle">åœ†åˆ·</option>
              <option value="Spray">å–·æª</option>
              <option value="hline">æ¨ªçº¿çº¹ç†</option>
              <option value="vline">ç«–çº¿çº¹ç†</option>
              <option value="square">æ–¹å—çº¹ç†</option>
              <option value="diamond">è±å½¢çº¹ç†</option>
            </select>
          </div>

          <div class="toolbar-group">
            <label>é¢œè‰²</label>
            <input type="color" id="left-drawing-color" value="#f97316" />
          </div>

          <div class="toolbar-group">
            <label>é˜´å½±è‰²</label>
            <input type="color" id="left-drawing-shadow-color" value="#000000" />
          </div>

          <div class="toolbar-group">
            <label>çº¿å®½ <span id="left-line-width-label">10</span></label>
            <input
              type="range"
              id="left-drawing-line-width"
              min="1"
              max="60"
              value="10"
            />
          </div>

          <div class="toolbar-group">
            <label>é˜´å½±æ¨¡ç³Š <span id="left-shadow-width-label">0</span></label>
            <input
              type="range"
              id="left-drawing-shadow-width"
              min="0"
              max="40"
              value="0"
            />
          </div>

          <div class="toolbar-group">
            <label>é˜´å½±åç§» <span id="left-shadow-offset-label">0</span></label>
            <input
              type="range"
              id="left-drawing-shadow-offset"
              min="0"
              max="40"
              value="0"
            />
          </div>

          <button id="left-drawing-mode">
            <span>ğŸ¨</span>
            <span>é€€å‡ºç»˜åˆ¶æ¨¡å¼</span>
          </button>

          <button id="left-clear-canvas" class="danger">
            <span>ğŸ§¹</span>
            <span>æ¸…ç©ºç”»å¸ƒ</span>
          </button>
        </div>

        <div class="canvas-wrapper">
          <canvas id="left-canvas" width="600" height="360"></canvas>
        </div>
        <div class="canvas-footer">
          <span>æç¤ºï¼šå·¦ä¸Šè§’æŒ‰é’®å¯åˆ‡æ¢ä¸åŒç”»ç¬” / çº¹ç†ã€‚</span>
        </div>
      </section>

      <!-- å³ä¾§ç”»æ¿ -->
      <section class="board">
        <div class="board-header">
          <div>
            <div class="board-title dot">å³ä¾§ç”»æ¿ Â· çŸ¢é‡ç¬”ç”»åŒº</div>
            <div class="board-subtitle">
              æ”¯æŒä¸å·¦ä¾§åŒæ ·çš„ç»˜åˆ¶åŠŸèƒ½ï¼Œå¹¶ä¸”å¯ä»¥è½½å…¥ / å¯¼å‡ºçŸ¢é‡åŒ–ç¬”ç”» JSONã€‚
            </div>
          </div>
        </div>

        <div class="toolbar" id="right-toolbar">
          <div class="toolbar-group">
            <label for="right-drawing-mode-selector">ç”»ç¬”</label>
            <select id="right-drawing-mode-selector">
              <option value="Pencil">é“…ç¬”</option>
              <option value="Circle">åœ†åˆ·</option>
              <option value="Spray">å–·æª</option>
              <option value="hline">æ¨ªçº¿çº¹ç†</option>
              <option value="vline">ç«–çº¿çº¹ç†</option>
              <option value="square">æ–¹å—çº¹ç†</option>
              <option value="diamond">è±å½¢çº¹ç†</option>
            </select>
          </div>

          <div class="toolbar-group">
            <label>é¢œè‰²</label>
            <input type="color" id="right-drawing-color" value="#22c55e" />
          </div>

          <div class="toolbar-group">
            <label>é˜´å½±è‰²</label>
            <input type="color" id="right-drawing-shadow-color" value="#000000" />
          </div>

          <div class="toolbar-group">
            <label>çº¿å®½ <span id="right-line-width-label">10</span></label>
            <input
              type="range"
              id="right-drawing-line-width"
              min="1"
              max="60"
              value="10"
            />
          </div>

          <div class="toolbar-group">
            <label>é˜´å½±æ¨¡ç³Š <span id="right-shadow-width-label">0</span></label>
            <input
              type="range"
              id="right-drawing-shadow-width"
              min="0"
              max="40"
              value="0"
            />
          </div>

          <div class="toolbar-group">
            <label>é˜´å½±åç§» <span id="right-shadow-offset-label">0</span></label>
            <input
              type="range"
              id="right-drawing-shadow-offset"
              min="0"
              max="40"
              value="0"
            />
          </div>

          <button id="right-drawing-mode">
            <span>ğŸ¨</span>
            <span>é€€å‡ºç»˜åˆ¶æ¨¡å¼</span>
          </button>

          <button id="right-clear-canvas" class="danger">
            <span>ğŸ§¹</span>
            <span>æ¸…ç©ºç”»å¸ƒ</span>
          </button>
        </div>

        <div class="canvas-wrapper">
          <canvas id="right-canvas" width="600" height="360"></canvas>
        </div>
        <div class="canvas-footer">
          <span>æç¤ºï¼šä¸‹æ–¹å¯ä»¥è½½å…¥ / å¯¼å‡º Fabric JSON çŸ¢é‡æ•°æ®ã€‚</span>
        </div>

        <!-- çŸ¢é‡ç¬”ç”»åŠ è½½é¢æ¿ï¼ˆåªåœ¨å³ä¾§ï¼‰ -->
        <div class="vector-panel">
          <div class="vector-panel-header">
            <div>
              çŸ¢é‡åŒ–ç¬”ç”» JSON
              <span class="tip">ï¼ˆå…¼å®¹ <span class="mono">canvas.loadFromJSON / toJSON()</span>ï¼‰</span>
            </div>
          </div>

          <textarea
            id="right-vector-input"
            placeholder='åœ¨æ­¤ç²˜è´´ Fabric.js çš„ JSON æ•°æ®ï¼Œç„¶åç‚¹å‡»â€œè½½å…¥åˆ°ç”»æ¿â€ã€‚&#10;ä¹Ÿå¯ä»¥åœ¨ç”»æ¿ä¸Šç»˜åˆ¶åç‚¹å‡»â€œå¯¼å‡ºå½“å‰ç”»æ¿ä¸º JSONâ€ã€‚'
          ></textarea>

          <div class="vector-panel-actions">
            <button id="right-export-json" class="secondary">
              <span>â¬‡ï¸</span>
              <span>å¯¼å‡ºå½“å‰ç”»æ¿ä¸º JSON</span>
            </button>
            <button id="right-load-vector">
              <span>â¬†ï¸</span>
              <span>è½½å…¥åˆ°ç”»æ¿</span>
            </button>
          </div>
        </div>
      </section>
    </main>
  </div>

  <script>
    // é€šç”¨åˆå§‹åŒ–å‡½æ•°ï¼šç»™ä¸€ä¸ªç”»æ¿ï¼ˆå·¦ or å³ï¼‰æŒ‚è½½å®Œæ•´çš„ç»˜åˆ¶åŠŸèƒ½
    function initDrawingBoard(prefix, canvasId) {
      const $ = (id) => document.getElementById(prefix + "-" + id);

      const canvas = new fabric.Canvas(canvasId, {
        isDrawingMode: true,
      });

      fabric.Object.prototype.transparentCorners = false;

      const drawingModeEl = $("drawing-mode");
      const drawingModeOptionsEl = null; // é¢„ç•™ï¼šå¦‚éœ€ options å®¹å™¨å¯æ‰©å±•
      const drawingColorEl = $("drawing-color");
      const drawingShadowColorEl = $("drawing-shadow-color");
      const drawingLineWidthEl = $("drawing-line-width");
      const drawingShadowWidthEl = $("drawing-shadow-width");
      const drawingShadowOffsetEl = $("drawing-shadow-offset");
      const clearEl = $("clear-canvas");

      const lineWidthLabel = $("line-width-label");
      const shadowWidthLabel = $("shadow-width-label");
      const shadowOffsetLabel = $("shadow-offset-label");
      const modeSelectorEl = $("drawing-mode-selector");

      // åˆå§‹æŒ‰é’®æ–‡å­—
      drawingModeEl.textContent = "é€€å‡ºç»˜åˆ¶æ¨¡å¼";
      canvas.isDrawingMode = true;

      clearEl.onclick = function () {
        canvas.clear();
      };

      drawingModeEl.onclick = function () {
        canvas.isDrawingMode = !canvas.isDrawingMode;
        if (canvas.isDrawingMode) {
          drawingModeEl.textContent = "é€€å‡ºç»˜åˆ¶æ¨¡å¼";
        } else {
          drawingModeEl.textContent = "è¿›å…¥ç»˜åˆ¶æ¨¡å¼";
        }
      };

      // PatternBrush ç›¸å…³
      let vLinePatternBrush,
        hLinePatternBrush,
        squarePatternBrush,
        diamondPatternBrush;

      if (fabric.PatternBrush) {
        vLinePatternBrush = new fabric.PatternBrush(canvas);
        vLinePatternBrush.getPatternSrc = function () {
          const patternCanvas = fabric.document.createElement("canvas");
          patternCanvas.width = patternCanvas.height = 10;
          const ctx = patternCanvas.getContext("2d");

          ctx.strokeStyle = this.color;
          ctx.lineWidth = 5;
          ctx.beginPath();
          ctx.moveTo(0, 5);
          ctx.lineTo(10, 5);
          ctx.closePath();
          ctx.stroke();

          return patternCanvas;
        };

        hLinePatternBrush = new fabric.PatternBrush(canvas);
        hLinePatternBrush.getPatternSrc = function () {
          const patternCanvas = fabric.document.createElement("canvas");
          patternCanvas.width = patternCanvas.height = 10;
          const ctx = patternCanvas.getContext("2d");

          ctx.strokeStyle = this.color;
          ctx.lineWidth = 5;
          ctx.beginPath();
          ctx.moveTo(5, 0);
          ctx.lineTo(5, 10);
          ctx.closePath();
          ctx.stroke();

          return patternCanvas;
        };

        squarePatternBrush = new fabric.PatternBrush(canvas);
        squarePatternBrush.getPatternSrc = function () {
          const squareWidth = 10,
            squareDistance = 2;

          const patternCanvas = fabric.document.createElement("canvas");
          patternCanvas.width = patternCanvas.height =
            squareWidth + squareDistance;
          const ctx = patternCanvas.getContext("2d");

          ctx.fillStyle = this.color;
          ctx.fillRect(0, 0, squareWidth, squareWidth);

          return patternCanvas;
        };

        diamondPatternBrush = new fabric.PatternBrush(canvas);
        diamondPatternBrush.getPatternSrc = function () {
          const squareWidth = 10,
            squareDistance = 5;
          const patternCanvas = fabric.document.createElement("canvas");
          const rect = new fabric.Rect({
            width: squareWidth,
            height: squareWidth,
            angle: 45,
            fill: this.color,
          });

          const canvasWidth = rect.getBoundingRect().width;

          patternCanvas.width = patternCanvas.height =
            canvasWidth + squareDistance;
          rect.set({ left: canvasWidth / 2, top: canvasWidth / 2 });

          const ctx = patternCanvas.getContext("2d");
          rect.render(ctx);

          return patternCanvas;
        };
      }

      // åˆ‡æ¢ç”»ç¬”ç±»å‹
      modeSelectorEl.onchange = function () {
        const value = this.value;

        if (value === "hline") {
          canvas.freeDrawingBrush = hLinePatternBrush;
        } else if (value === "vline") {
          canvas.freeDrawingBrush = vLinePatternBrush;
        } else if (value === "square") {
          canvas.freeDrawingBrush = squarePatternBrush;
        } else if (value === "diamond") {
          canvas.freeDrawingBrush = diamondPatternBrush;
        } else {
          // å¯¹åº” fabric.PencilBrush / fabric.CircleBrush / fabric.SprayBrush
          const brushClass = fabric[value + "Brush"];
          if (brushClass) {
            canvas.freeDrawingBrush = new brushClass(canvas);
          } else {
            // fallback
            canvas.freeDrawingBrush = new fabric.PencilBrush(canvas);
          }
        }

        if (canvas.freeDrawingBrush) {
          const brush = canvas.freeDrawingBrush;
          brush.color = drawingColorEl.value;

          if (brush.getPatternSrc) {
            brush.source = brush.getPatternSrc.call(brush);
          }

          brush.width = parseInt(drawingLineWidthEl.value, 10) || 1;
          brush.shadow = new fabric.Shadow({
            blur: parseInt(drawingShadowWidthEl.value, 10) || 0,
            offsetX: parseInt(drawingShadowOffsetEl.value, 10) || 0,
            offsetY: parseInt(drawingShadowOffsetEl.value, 10) || 0,
            affectStroke: true,
            color: drawingShadowColorEl.value,
          });
        }
      };

      // åˆå§‹åŒ–ä¸€æ¬¡ç”»ç¬”
      modeSelectorEl.dispatchEvent(new Event("change"));

      // é¢œè‰²å˜åŒ–
      drawingColorEl.onchange = function () {
        const brush = canvas.freeDrawingBrush;
        if (!brush) return;
        brush.color = this.value;
        if (brush.getPatternSrc) {
          brush.source = brush.getPatternSrc.call(brush);
        }
      };

      // é˜´å½±é¢œè‰²å˜åŒ–
      drawingShadowColorEl.onchange = function () {
        const brush = canvas.freeDrawingBrush;
        if (!brush || !brush.shadow) return;
        brush.shadow.color = this.value;
      };

      // çº¿å®½å˜åŒ–
      drawingLineWidthEl.onchange = function () {
        const brush = canvas.freeDrawingBrush;
        const v = parseInt(this.value, 10) || 1;
        if (brush) brush.width = v;
        if (lineWidthLabel) lineWidthLabel.textContent = v;
      };

      // é˜´å½±æ¨¡ç³Šå˜åŒ–
      drawingShadowWidthEl.onchange = function () {
        const brush = canvas.freeDrawingBrush;
        const v = parseInt(this.value, 10) || 0;
        if (brush && brush.shadow) brush.shadow.blur = v;
        if (shadowWidthLabel) shadowWidthLabel.textContent = v;
      };

      // é˜´å½±åç§»å˜åŒ–ï¼ˆåŒæ—¶ä½œç”¨ X / Yï¼‰
      drawingShadowOffsetEl.onchange = function () {
        const brush = canvas.freeDrawingBrush;
        const v = parseInt(this.value, 10) || 0;
        if (brush && brush.shadow) {
          brush.shadow.offsetX = v;
          brush.shadow.offsetY = v;
        }
        if (shadowOffsetLabel) shadowOffsetLabel.textContent = v;
      };

      return canvas;
    }

    // ç­‰é¡µé¢åŠ è½½å®Œååˆå§‹åŒ–ä¸¤ä¸ªç”»æ¿
    window.addEventListener("DOMContentLoaded", function () {
      const leftCanvas = initDrawingBoard("left", "left-canvas");
      const rightCanvas = initDrawingBoard("right", "right-canvas");

      // ===== å³ä¾§ç”»æ¿ï¼šçŸ¢é‡åŒ–ç¬”ç”»ï¼ˆJSONï¼‰è½½å…¥ / å¯¼å‡º =====
      const vectorInput = document.getElementById("right-vector-input");
      const loadBtn = document.getElementById("right-load-vector");
      const exportBtn = document.getElementById("right-export-json");

      loadBtn.addEventListener("click", function () {
        if (!vectorInput.value.trim()) {
          alert("è¯·å…ˆåœ¨æ–‡æœ¬æ¡†ä¸­ç²˜è´´ JSON æ•°æ®ã€‚");
          return;
        }
        try {
          const json = JSON.parse(vectorInput.value);
          rightCanvas.loadFromJSON(json, function () {
            rightCanvas.renderAll();
          });
        } catch (e) {
          console.error(e);
          alert("JSON è§£æå¤±è´¥ï¼Œè¯·ç¡®è®¤æ ¼å¼æ˜¯å¦æ­£ç¡®ã€‚");
        }
      });

      exportBtn.addEventListener("click", function () {
        const json = rightCanvas.toJSON();
        vectorInput.value = JSON.stringify(json, null, 2);
      });
    });
  </script>
</body>
</html>
<!-- æ”¹å‡ ä¸ªåœ°æ–¹ï¼Œé‡æ–°ç»™æˆ‘ä»£ç ï¼Œ1.å…¨éƒ¨ä½¿ç”¨è‹±æ–‡ 2ï¼Œç”»æ¿é»˜è®¤ç”»æ¿æ˜¯ç™½è‰²ï¼Œç»˜åˆ¶strokeé»˜è®¤é¢œè‰²æ˜¯é»‘è‰² 3.é€‰ä¸­çº¿æ¡ä»¥åå¯ä»¥å¯¹çº¿æ¡ä¿®æ”¹é¢œè‰² 4ï¼Œæ·»åŠ åˆ é™¤çº¿æ¡çš„åŠŸèƒ½ 5ï¼Œå³ä¾§ä¸éœ€è¦çŸ¢é‡åŒ–ç¬”ç”» JSONè¿™ä¸€éƒ¨åˆ†ï¼Œåªéœ€è¦åŠ ä¸Šä¸€ä¸ªæŒ‰é’®æ˜¯Completion ï¼Œè¿™ä¸ªæŒ‰é’®æ ·å¼å¥½çœ‹ç‚¹ï¼Œ6.é¡¶éƒ¨æ ‡é¢˜ä¸ºSketchRevive è€Œä¸æ˜¯åŒç”»æ¿ç»˜å›¾ & çŸ¢é‡ç¬”ç”»é¢æ¿ï¼Œä¸éœ€è¦å‰¯æ ‡é¢˜ 7ï¼Œå·¦ä¾§æ·»åŠ ä¸€ä¸ªè¯­éŸ³è¾“å…¥ç»„ä»¶ï¼Œå¯ä»¥å¼€å¯å…³é—­è¯­éŸ³æŒ‰é’®ï¼Œç„¶åå¯ä»¥æŠŠè¾“å…¥çš„è¯­éŸ³å®æ—¶è½¬åŒ–ä¸ºæ–‡æœ¬æ˜¾ç¤ºå‡ºæ¥ -->